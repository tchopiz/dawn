/*
 *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
*****************************************************************************/
!function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};var t=function(){return(t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function n(e,t,n,r){return new (n||(n=Promise))(function(o,i){function a(e){try{u(r.next(e))}catch(e$0){i(e$0)}}
function c(e){try{u(r.throw(e))}catch(e$1){i(e$1)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,c)}u((r=r.apply(e,t||[])).next())})}function r(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(i){return function(c){return function(i){if(n)throw new TypeError("Generator is already executing.");
for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],
o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e$2){i=[6,e$2],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}function o(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.");
}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e$3){o={error:e$3}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error;}}return a}function a(e){return this instanceof a?(this.v=e,this):new a(e)}var c,u,s,d,l=Object.freeze({__proto__:null,__extends:function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=
n.prototype,new r)},get __assign(){return t},__rest:function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},__decorate:function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==
typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},__param:function(e,t){return function(n,r){t(n,r,e)}},__metadata:function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},__awaiter:n,__generator:r,__createBinding:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]},__exportStar:function(e,t){for(var n in e)"default"===
n||t.hasOwnProperty(n)||(t[n]=e[n])},__values:o,__read:i,__spread:function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e},__spreadArrays:function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,c=i.length;a<c;a++,o++)r[o]=i[a];return r},__await:a,__asyncGenerator:function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,o=n.apply(e,t||
[]),i=[];return r={},c("next"),c("throw"),c("return"),r[Symbol.asyncIterator]=function(){return this},r;function c(e){o[e]&&(r[e]=function(t){return new Promise(function(n,r){i.push([e,t,n,r])>1||u(e,t)})})}function u(e,t){try{(n=o[e](t)).value instanceof a?Promise.resolve(n.value.v).then(s,d):l(i[0][2],n)}catch(e$4){l(i[0][3],e$4)}var n}function s(e){u("next",e)}function d(e){u("throw",e)}function l(e,t){e(t),i.shift(),i.length&&u(i[0][0],i[0][1])}},__asyncDelegator:function(e){var t,n;return t=
{},r("next"),r("throw",function(e){throw e;}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(r,o){t[r]=e[r]?function(t){return(n=!n)?{value:a(e[r](t)),done:"return"===r}:o?o(t):t}:o}},__asyncValues:function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,n=e[Symbol.asyncIterator];return n?n.call(e):(e=o(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(n){t[n]=e[n]&&function(t){return new Promise(function(r,
o){(function(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)})(r,o,(t=e[n](t)).done,t.value)})}}},__makeTemplateObject:function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},__importStar:function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},__importDefault:function(e){return e&&e.__esModule?e:{default:e}},__classPrivateFieldGet:function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");
return t.get(e)},__classPrivateFieldSet:function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n}});!function(e){e.StyleId="shopify-privacy-banner-styles",e.DivId="shopify-privacy-banner-div",e.InnerDivId="shopify-privacy-banner-inner-div",e.BodyDivId="shopify-privacy-banner-body-div",e.PrivacyPolicyLinkId="shopify-privacy-banner-privacy-policy"}(c||(c={})),function(e){e.DivId="shopify-privacy-banner-button-div",e.AcceptButtonId="shopify-privacy-banner-accept-button",
e.AcceptButtonClass="accept",e.DeclineButtonId="shopify-privacy-banner-decline-button",e.DeclineButtonClass="decline"}(u||(u={})),function(e){e.Black="#000000",e.White="#FFFFFF"}(s||(s={})),function(e){e.Dark="dark",e.Light="light"}(d||(d={}));var p;function f(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function h(e,t){return e(t={exports:{}},t.exports),t.exports}!function(e){e.Accepted="accept",e.Declined="decline",e.PrivacyPolicyView="privacy_policy_view"}(p||
(p={}));var v=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DEVELOPMENT_DOMAIN="http://localhost:8082",t.PRODUCTION_DOMAIN="https://monorail-edge.shopifysvc.com",t.PRODUCE_BATCH_ENDPOINT="/unstable/produce_batch",t.PRODUCE_ENDPOINT="/v1/produce",t.PRODUCTION_CANADA_ENDPOINT="https://monorail-edge-ca.shopifycloud.com/v1/produce",t.extractDomain=function(e){return"https://"+(new URL(e)).hostname}});f(v);v.DEVELOPMENT_DOMAIN,v.PRODUCTION_DOMAIN,v.PRODUCE_BATCH_ENDPOINT,v.PRODUCE_ENDPOINT,
v.PRODUCTION_CANADA_ENDPOINT,v.extractDomain;for(var y=h(function(e){var t="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(t){var n=new Uint8Array(16);e.exports=function(){return t(n),n}}else{var r=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),r[t]=e>>>((3&t)<<3)&255;return r}}}),m=[],
b=0;b<256;++b)m[b]=(b+256).toString(16).substr(1);var w,g,_=function(e,t){var n=t||0,r=m;return[r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],"-",r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]],r[e[n++]]].join("")},E=0,P=0;var M=function(e,t,n){var r=t&&n||0,o=t||[],i=(e=e||{}).node||w,a=void 0!==e.clockseq?e.clockseq:g;if(null==i||null==a){var c=y();null==i&&(i=w=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=g=16383&(c[6]<<8|c[7]))}var u=
void 0!==e.msecs?e.msecs:(new Date).getTime(),s=void 0!==e.nsecs?e.nsecs:P+1,d=u-E+(s-P)/1E4;if(d<0&&void 0===e.clockseq&&(a=a+1&16383),(d<0||u>E)&&void 0===e.nsecs&&(s=0),s>=1E4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");E=u,P=s,g=a;var l=(1E4*(268435455&(u+=122192928E5))+s)%4294967296;o[r++]=l>>>24&255,o[r++]=l>>>16&255,o[r++]=l>>>8&255,o[r++]=255&l;var p=u/4294967296*1E4&268435455;o[r++]=p>>>8&255,o[r++]=255&p,o[r++]=p>>>24&15|16,o[r++]=p>>>16&255,o[r++]=a>>>8|128,o[r++]=
255&a;for(var f=0;f<6;++f)o[r+f]=i[f];return t||_(o)};var D=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||y)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var i=0;i<16;++i)t[r+i]=o[i];return t||_(o)},C=D;C.v1=M,C.v4=D;var I=C,O=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){function t(n){var r=e.call(this,"Error producing to the Monorail Edge. Response received: "+JSON.stringify(n))||this;
return r.response=n,Object.setPrototypeOf(r,t.prototype),r}return l.__extends(t,e),t}(Error);t.MonorailUnableToProduceError=n;var r=function(e){function t(n){var r=e.call(this,"Error producing to the Monorail Edge. Response received: "+JSON.stringify(n))||this;return Object.setPrototypeOf(r,t.prototype),r.response=n,r}return l.__extends(t,e),t}(Error);t.MonorailBatchProduceError=r;var o=function(e){function t(n){var r=e.call(this,"Error completing request. A network failure may have prevented the request from completing. Error: "+
n)||this;return Object.setPrototypeOf(r,t.prototype),r}return l.__extends(t,e),t}(Error);t.MonorailRequestError=o;var i=function(e){function t(n){var r=e.call(this,""+n)||this;return Object.setPrototypeOf(r,t.prototype),r}return l.__extends(t,e),t}(Error);t.MonorailRetriesExceededError=i});f(O);O.MonorailUnableToProduceError,O.MonorailBatchProduceError,O.MonorailRequestError,O.MonorailRetriesExceededError;var B=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){void 0===
e&&(e=v.DEVELOPMENT_DOMAIN),this.edgeDomain=e}return e.withEndpoint=function(t){return new e(v.extractDomain(t))},e.getHeadersFromMetadata=function(e){var t={"Content-Type":"application/json; charset=utf-8","X-Monorail-Edge-Event-Created-At-Ms":(e&&e.eventCreatedAtMs||Date.now()).toString(),"X-Monorail-Edge-Event-Sent-At-Ms":Date.now().toString(),"X-Monorail-Edge-Client-Message-Id":(e&&e.clientMessageId||I.v4()).toString()};return e&&e.userAgent&&(t["User-Agent"]=e.userAgent),t},e.prototype.produceBatch=
function(t){return l.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a,c;return l.__generator(this,function(u){switch(u.label){case 0:n={events:this.convertAllEventsToUnderscoreCase(t),metadata:this.toUnderscoreCase(t.metadata)},u.label=1;case 1:return u.trys.push([1,3,,4]),[4,fetch(this.produceBatchEndpoint(),{method:"post",headers:e.getHeadersFromMetadata(t.metadata),body:JSON.stringify(n)})];case 2:return r=u.sent(),[3,4];case 3:throw o=u.sent(),new O.MonorailRequestError(o);case 4:return 207!==
r.status?[3,6]:[4,r.json()];case 5:throw i=u.sent(),new O.MonorailBatchProduceError(i);case 6:return r.ok?[3,8]:(a=O.MonorailUnableToProduceError.bind,c={status:r.status},[4,r.text()]);case 7:throw new (a.apply(O.MonorailUnableToProduceError,[void 0,(c.message=u.sent(),c)]));case 8:return[2,{status:r.status}]}})})},e.prototype.produce=function(t){return l.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a;return l.__generator(this,function(c){switch(c.label){case 0:n={schema_id:t.schemaId,payload:this.toUnderscoreCase(t.payload)},
c.label=1;case 1:return c.trys.push([1,3,,4]),[4,fetch(this.produceEndpoint(),{method:"post",headers:e.getHeadersFromMetadata(t.metadata),body:JSON.stringify(n)})];case 2:return r=c.sent(),[3,4];case 3:throw o=c.sent(),new O.MonorailRequestError(o);case 4:if(!r)throw new O.MonorailUnableToProduceError({message:"No response from edge"});return r.ok?[3,6]:(i=O.MonorailUnableToProduceError.bind,a={status:r.status},[4,r.text()]);case 5:throw new (i.apply(O.MonorailUnableToProduceError,[void 0,(a.message=
c.sent(),a)]));case 6:return[2,{status:r.status}]}})})},e.prototype.produceBatchEndpoint=function(){return this.edgeDomain+v.PRODUCE_BATCH_ENDPOINT},e.prototype.produceEndpoint=function(){return this.edgeDomain+v.PRODUCE_ENDPOINT},e.prototype.convertAllEventsToUnderscoreCase=function(e){var t=this;return e.events.map(function(e){return{schema_id:e.schemaId,payload:t.toUnderscoreCase(e.payload),metadata:t.toUnderscoreCase(e.metadata)}})},e.prototype.toUnderscoreCase=function(e){var t=this;return e?
Object.keys(e).map(function(n){var r;return(r={})[t.convertStringToUnderscoreCase(n)]=e[n],r}).reduce(function(e,t){return l.__assign({},e,t)}):e},e.prototype.convertStringToUnderscoreCase=function(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()},e}();t.HttpProducer=n});f(B);B.HttpProducer;var x=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t){this.sendToConsole=t,t&&e.printWelcomeMessage(t)}return e.printWelcomeMessage=function(e){console.log("%c\ud83d\udc4b from Monorail%c\n\nWe've noticed that you're"+
(e?"":" not")+" running in debug mode. As such, we will "+(e?"produce":"not produce")+" Monorail events to the console. \n\nIf you want Monorail events to "+(e?"stop":"start")+" appearing here, %cset debugMode="+(!e).toString()+"%c, for the Monorail Log Producer in your code.","font-size: large;","font-size: normal;","font-weight: bold;","font-weight: normal;")},e.prototype.produce=function(e){return this.sendToConsole&&console.log("Monorail event produced",e),new Promise(function(t){t(e)})},e.prototype.produceBatch=
function(e){return this.sendToConsole&&console.log("Monorail Batch event produced",e),new Promise(function(t){t(e)})},e}();t.LogProducer=n});f(x);x.LogProducer;var A=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isCompositeMonorailEvent=function(e){return void 0!==e.schemaId}});f(A);A.isCompositeMonorailEvent;var T=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.producer=e}return e.prototype.do=function(e,t){return A.isCompositeMonorailEvent(e)?
this.producer.produce(e):this.producer.produceBatch(e)},e}();t.ProducerMiddleware=n});f(T);T.ProducerMiddleware;var k=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(t,n){this.producer=t,this.middleware=n,this.executeChain=e.buildMiddlewareChain(this.middleware.concat(new T.ProducerMiddleware(t)))}return e.createLogProducer=function(t){return new e(new x.LogProducer(t.debugMode),t.middleware||[])},e.createHttpProducerWithEndpoint=function(t,n){return void 0===
n&&(n=[]),new e(B.HttpProducer.withEndpoint(t),n)},e.createHttpProducer=function(t){return new e(t.production?new B.HttpProducer(v.PRODUCTION_DOMAIN):new B.HttpProducer(v.DEVELOPMENT_DOMAIN),t.middleware||[])},e.buildMiddlewareChain=function(e,t){var n=this;return void 0===t&&(t=0),t===e.length?this.identityFn:function(r){return e[t].do(r,n.buildMiddlewareChain(e,t+1))}},e.prototype.produce=function(e){return e.metadata=l.__assign({eventCreatedAtMs:Date.now(),clientMessageId:I.v4()},e.metadata),this.executeChain(e)},
e.prototype.produceBatch=function(e){return this.executeChain(e)},e}();t.Monorail=n});f(k);k.Monorail;var R=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===e&&(e=3),void 0===t&&(t=150),this.maxRetries=e,this.delayMs=t}return e.prototype.do=function(e,t){return l.__awaiter(this,void 0,void 0,function(){var n,r,o,i,a;return l.__generator(this,function(c){switch(c.label){case 0:n=0,c.label=1;case 1:if(!(n<this.maxRetries))return[3,7];o=void 0,
c.label=2;case 2:return c.trys.push([2,4,,6]),[4,t(e)];case 3:return o=c.sent(),[3,6];case 4:if(i=c.sent(),r=r||new Error,r=new Error(r.message+" Retry count:"+(n+1)+" Error msg:"+i.message+"\n"),i instanceof O.MonorailUnableToProduceError&&(a=i.response.status)&&a>=400&&a<500)throw i;return[4,this.delay(this.delayMs*Math.pow(2,n))];case 5:return c.sent(),n++,[3,1];case 6:return[2,o];case 7:throw r?r.message="Retry count of "+this.maxRetries+" exceeded. Failed with error: \n"+r.message+" Aborting request for "+
JSON.stringify(e):r=new Error,new O.MonorailRetriesExceededError(r);}})})},e.prototype.delay=function(e){return new Promise(function(t){return setTimeout(t,e)})},e}();t.RetryMiddleware=n});f(R);R.RetryMiddleware;var S=h(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Monorail=k.Monorail,t.MonorailRequestError=O.MonorailRequestError,t.MonorailUnableToProduceError=O.MonorailUnableToProduceError,t.MonorailRetriesExceededError=O.MonorailRetriesExceededError,t.RetryMiddleware=R.RetryMiddleware});
f(S);var N=S.Monorail,j=(S.MonorailRequestError,S.MonorailUnableToProduceError,S.MonorailRetriesExceededError,S.RetryMiddleware,N.createHttpProducer({production:!0}));function U(e){var t=F(),n=H(),r=W(),o=q();j.produce({schemaId:"privacy_banner_interact/1.0",payload:{shopPermanentDomain:t,sessionToken:n,regulation:r,path:o,interactionType:e}})}var L=function(){document.getElementById(c.DivId).style.display="none"};function F(){return window.Shopify.shop}function H(){var e=function(e){for(var t=0,
n=decodeURIComponent(document.cookie).split(";");t<n.length;t++){var r=n[t].split("="),o=r[0],i=r[1];if(o.trim()===e)return i}return""}("_shopify_s");return e||"0"}function q(){return window.location.pathname}function W(){return window.Shopify.customerPrivacy.getRegulation()}var V=function(e,t){return void 0===t&&(t=1),n(void 0,void 0,void 0,function(){var n,o;return r(this,function(r){switch(r.label){case 0:return[4,fetch(e+"&request_attempt="+t)];case 1:return[4,(n=r.sent()).json()];case 2:return o=
r.sent(),200===n.status?[2,o]:t<6?[4,new Promise(function(e){return setTimeout(e,5E3)})]:[3,4];case 3:return r.sent(),[2,V(e,t+1)];case 4:throw new Error("Could not reach the server");}})})},z=function(){return n(void 0,void 0,Promise,function(){var e;return r(this,function(t){try{return e=window.Shopify.shop,[2,V("https://privacy-banner.shopifycloud.com/customization?shopify_domain="+e)]}catch(e$5){throw Error(e$5);}return[2]})})},G=function(){return!window.location.pathname.match(/^(\/[a-z]{2}(-[A-Z]{2})?)?\/cart$/)&&
void 0!==window.Shopify&&void 0!==window.Shopify.customerPrivacy&&"GDPR"===window.Shopify.customerPrivacy.getRegulation()&&window.Shopify.customerPrivacy.isRegulationEnforced()&&"no_interaction"===window.Shopify.customerPrivacy.getTrackingConsent()},J=function(){var e=window.location.search.substring(1);return 0!==e.length&&e.split("&").map(function(e){return e.split("=")}).some(function(e){return"preview_privacy_banner"===e[0]&&"1"===e[1]})},X=function(){function e(){}return e.prototype.init=function(){return n(this,
void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return this.removeExistingBannerElements(),[4,this.renderBanner()];case 1:return e.sent(),[2]}})})},e.prototype.renderBanner=function(){return n(this,void 0,void 0,function(){var e,t,n;return r(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,5]),J()?[4,z()]:[3,2];case 1:return e=r.sent(),Object.keys(e).length?(this.writeBannerToDom(e),this.showBanner(),[2]):(console.warn("banner not rendered due to lack of saved data"),
[2]);case 2:return[4,z()];case 3:return t=r.sent(),this.merchantHasPublished(t)&&(this.writeBannerToDom(t),this.showBanner(),o=F(),i=H(),a=W(),c=q(),j.produce({schemaId:"privacy_banner_render/1.0",payload:{shopPermanentDomain:o,sessionToken:i,regulation:a,path:c}})),[3,5];case 4:throw n=r.sent(),Error(n);case 5:return[2]}var o,i,a,c})})},e.prototype.writeBannerToDom=function(e){var t=e.theme===d.Dark?{banner:s.Black,bannerFont:s.White,buttonAcceptBackground:s.White,buttonAcceptColor:s.Black,buttonDeclineBackground:s.Black,
buttonDeclineColor:s.White,buttonBorderColor:s.White}:{banner:s.White,bannerFont:s.Black,buttonAcceptBackground:s.Black,buttonAcceptColor:s.White,buttonDeclineBackground:s.White,buttonDeclineColor:s.Black,buttonBorderColor:s.Black},n=document.createElement("div");n.setAttribute("id",c.DivId),n.appendChild(this.getBannerTemplate(e)),document.getElementsByTagName("body")[0].appendChild(n),this.addEventListeners();var r=document.createElement("style");r.setAttribute("id",c.StyleId),r.innerHTML=function(e,
t){return void 0===t&&(t=!1),"\n      #"+c.DivId+" {\n        box-shadow: 0px 0px 0px rgba(63, 63, 68, 0.05), 0px 1px 3px rgba(63, 63, 68, 0.15);\n        position: "+(t?"static":"fixed")+";\n        bottom: 0%;\n        width: 100%;\n        background-color: "+e.banner+";\n        opacity: 1;\n        z-index: 9999;\n        padding:20px;\n      }\n      #"+c.DivId+':after {\n        content:"";\n        display:block;\n        clear:both;\n      }\n\n      #'+c.InnerDivId+" {\n        position: relative;\n      }\n\n      #"+
c.InnerDivId+':after {\n        content:"";\n        display:block;\n        clear:both;\n      }\n\n      #'+c.BodyDivId+" {\n        float: "+(t?"none":"left")+";\n      }\n      #"+c.DivId+" h3 {\n        color: "+e.bannerFont+";\n        font-family: inherit;\n        font-size: 120%;\n        margin-bottom: 0;\n        font-weight:bold;\n      }\n      #"+c.DivId+" p {\n        color: "+e.bannerFont+";\n        font-family: inherit;\n      }\n      #"+c.DivId+" a {\n        color: "+e.bannerFont+
";\n        text-decoration: underline;\n      }\n      #"+c.DivId+" button {\n        border: none;\n        text-decoration: none;\n        font-family: inherit;\n        border-radius: 6px;\n        padding: 5px 20px;\n        margin:15px 5px 0 0;\n      }\n      #"+c.DivId+" button:hover {\n        cursor: pointer;\n      }\n      #"+c.DivId+" button."+u.AcceptButtonClass+" {\n        background:"+e.buttonAcceptBackground+";\n        color:"+e.buttonAcceptColor+";\n        border:2px solid "+
e.buttonBorderColor+";\n      }\n\n      #"+c.DivId+" button."+u.DeclineButtonClass+" {\n        background:"+e.buttonDeclineBackground+";\n        color:"+e.buttonDeclineColor+";\n        border:2px solid "+e.buttonBorderColor+";\n      }\n      #"+u.DivId+" {\n        float: "+(t?"none":"right")+";\n      }\u200b"}(t,!1),document.head.appendChild(r)},e.prototype.removeExistingBannerElements=function(){var e=document.getElementById(c.DivId),t=document.getElementById(c.StyleId);null==e||e.parentNode.removeChild(e),
null==t||t.parentNode.removeChild(t)},e.prototype.getBannerTemplate=function(e){return function(e){var t=e.config,n=e.adminPreview,r=void 0!==n&&n,o=document.createElement("div");o.setAttribute("id",c.InnerDivId);var i=document.createElement("div");i.setAttribute("id",c.BodyDivId),o.appendChild(i);var a=document.createElement("div");if(a.setAttribute("id",u.DivId),o.appendChild(a),t.title){var s=document.createElement("h3");s.textContent=t.title,i.appendChild(s)}var d=document.createElement("p");
d.textContent=t.bannerCopy+" ";var l=document.createElement("a");l.setAttribute("id",c.PrivacyPolicyLinkId),l.setAttribute("href",t.policyLink),l.setAttribute("target","_blank"),l.textContent="Privacy Policy",d.appendChild(l),i.appendChild(d);var p=document.createElement("button"),f=document.createElement("button");return r&&(p.setAttribute("disabled",""),f.setAttribute("disabled","")),p.setAttribute("id",u.AcceptButtonId),p.setAttribute("class",u.AcceptButtonClass),p.textContent=t.acceptButtonCopy,
f.setAttribute("id",u.DeclineButtonId),f.setAttribute("class",u.DeclineButtonClass),f.textContent=t.declineButtonCopy,a.appendChild(p),a.appendChild(f),o}({config:e})},e.prototype.addEventListeners=function(){J()||(this.addEssentialEventListeners(),this.addMetricsEventListeners())},e.prototype.addEssentialEventListeners=function(){document.getElementById(u.AcceptButtonId).addEventListener("click",function(){window.Shopify.customerPrivacy.setTrackingConsent(!0,L)}),document.getElementById(u.DeclineButtonId).addEventListener("click",
function(){window.Shopify.customerPrivacy.setTrackingConsent(!1,L)})},e.prototype.addMetricsEventListeners=function(){document.getElementById(c.PrivacyPolicyLinkId).addEventListener("click",function(){U(p.PrivacyPolicyView)}),document.getElementById(u.AcceptButtonId).addEventListener("click",function(){U(p.Accepted)}),document.getElementById(u.DeclineButtonId).addEventListener("click",function(){U(p.Declined)})},e.prototype.merchantHasPublished=function(e){return!0===(null==e?void 0:e.visible)},e.prototype.showBanner=
function(){document.getElementById(c.DivId).style.display="block"},e}();function Z(){return n(this,void 0,void 0,function(){return r(this,function(e){switch(e.label){case 0:return J()||"GDPR"===window.Shopify.customerPrivacy.getRegulation()&&G()?[4,(new X).init()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})}window.Shopify.loadFeatures([{name:"consent-tracking-api",version:"0.1"}],function(e){if(e)throw e;!function(){n(this,void 0,void 0,function(){return r(this,function(e){return[2,Z()]})})}()})}();
