!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).hyperscripts={})}(this,function(e){"use strict";var i="javascript/blocked",d={blacklist:window.HS_SCRIPTS_BLACKLIST,whitelist:window.HS_SCRIPTS_WHITELIST,deferlist:window.HS_SCRIPTS_DEFERLIST},p={blacklisted:[]};function o(t,e){var n=!t.src||!d.whitelist||d.whitelist.every(function(e){return!e.test(t.src)});return(!e||e!==i)&&!!(!(e=e)||"application/javascript"===e||"text/javascript"===e||"application/ecmascript"===e)&&!t.hasAttribute("hs-ignore")&&n&&!((n=t).src&&n.src.includes("jquery"))}var t=new MutationObserver(function(e){for(var t=0;t<e.length;t++)for(var r=e[t].addedNodes,n=0;n<r.length;n++)!function(e){var n=r[e];1===n.nodeType&&"SCRIPT"===n.tagName&&((e=n.type)===i&&n.getAttribute("hs-load")?p.blacklisted.push([n,"application/javascript"]):o(n,e)&&(p.blacklisted.push([n,n.type]),n.type=i,e=function e(t){n.getAttribute("type")===i&&t.preventDefault(),n.removeEventListener("beforescriptexecute",e)},n.addEventListener("beforescriptexecute",e)))}(n)});t.observe(document.documentElement,{childList:!0,subtree:!0});var f=document.createElement,a={src:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"src"),type:Object.getOwnPropertyDescriptor(HTMLScriptElement.prototype,"type")};document.createElement=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if("script"!==t[0].toLowerCase()||window.hsUnblocked)return f.bind(document).apply(void 0,t);var r=f.bind(document).apply(void 0,t);try{Object.defineProperties(r,{src:{get:function(){return a.src.get.call(this)},set:function(e){o(r,r.type)&&a.type.set.call(this,i),a.src.set.call(this,e)}},type:{set:function(e){e=o(r,r.type)?i:e;a.type.set.call(this,e)}}}),r.setAttribute=function(e,t){"type"===e||"src"===e?r[e]=t:HTMLScriptElement.prototype.setAttribute.call(r,e,t)}}catch(e){console.warn("HyperScripts: unable to prevent script execution for script src ",r.src,".\n",'A likely cause would be because you are using a third-party browser extension that monkey patches the "document.createElement" function.')}return r};var n,r,c,s=null;function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null!=n){var r,i,o=[],a=!0,c=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){c=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(c)throw i}}return o}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){var n=new Blob([e],{type:"text/javascript"}),e=URL.createObjectURL(n),n=f.bind(document)("script");n.src=e,n.async=!1,v(n,t)}function v(e,t){t?(t.appendChild(e),t.parentNode?t.parentNode.insertBefore(e,t):document.head.appendChild(e),t.parentElement&&t.parentElement.removeChild(t)):document.head.appendChild(e)}window.hsDeferReady=((c=new Promise(function(e,t){return n=e,r=t})).resolve=n,c.reject=r,c),Object.defineProperty(window,"$",{configurable:!0,enumerable:!0,writeable:!0,get:function(){return s},set:function(e){var n;e&&(n=e.prototype.ready,e.prototype.ready=function(e){var t=this;return Promise.all([n,window.hsDeferReady]).then(function(){return n.call(t,e)})}),s=e}});e.loadScriptSynchronouslyReplace=b,e.unblock=function(){var a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];window.hsUnblocked=!0;var e,c=[],s=[],l=[],u=0;h(p.blacklisted).forEach(function(e,t){var n,r=y(e,2),i=r[0],o=r[1],e=function(e,t){for(var n,r=f.bind(document)("script"),i=0;i<e.attributes.length;i++){var o=e.attributes[i];r.setAttribute(o.name,o.value)}for(n in e)n.startsWith("on")&&(r[n]=e[n]);return r.setAttribute("type",t||"application/javascript"),r.removeAttribute("hs-load"),r}(i,o),r=!(i.src||"application/javascript"!==o&&"text/javascript"!==o&&"module"!==o&&o);!a&&(n=i,d.deferlist&&(n.src?d.deferlist.some(function(e){return e.test(n.src)}):n.innerHTML&&d.deferlist.some(function(e){return e.test(n.innerHTML)})))&&!function(e){if(e.src||!e.innerHTML)return!1;return/asyncLoad/.test(e.innerHTML)}(i)?l.push([i,o]):r?(e.innerHTML=i.innerHTML,e.innerHTML&&"module"===o||e.innerHTML&&e.innerHTML.includes("asyncLoad")?v(e,i):b(e.innerHTML,i)):(e.async=!!i.hasAttribute("async"),e.defer=!!i.hasAttribute("defer"),e.async?s.push([e,i]):e.defer?c.push([e,i]):v(e,i)),p.blacklisted.splice(t-u,1),u++}),c.forEach(function(e){e=y(e,2);v(e[0],e[1])}),s.forEach(function(e){var t=y(e,2),e=t[0],t=t[1];e.async=!1,v(e,t)}),a||(e=p.blacklisted).push.apply(e,l),window.hsFiredReplacementEvents||(b("\n            (function() {\n                if (window.hsDeferReady) {\n                    window.hsDeferReady.resolve();\n                }\n                window.document.dispatchEvent(new Event('DOMContentLoaded', {bubbles: true}));\n            })();\n        ",null),b("\n            (function() {\n                var loadEvent = document.createEvent('Event');\n                loadEvent.initEvent('load', false, false);\n                window.dispatchEvent(loadEvent);\n            })();\n        ",null),window.hsFiredReplacementEvents=!0),t.disconnect()},Object.defineProperty(e,"__esModule",{value:!0})});